summarise(mean_prop_short = mean(propshortfalltroops, na.rm = TRUE),
yearmon2 = yearmon) %>%
ungroup()
library(lubridate)
df_1999 <- df_1999 %>%
mutate(date = make_date(year = year, month = month))
df_1999 <- df_1999 %>%
mutate(date = make_date(year = as.numeric(year), month = as.numeric(month)))
df_1999 <- df_1999 %>%
mutate(date = make_date(year = as.character(year), month = as.character(month)))
?make_date
df_1999 <- df_1999 %>%
mutate(date = make_date(year = year, month = month))
?as.yearmon
rlang::last_error()
rlang::last_trace()
df_1999 <- df_1999 %>%
mutate(date = as.Date(yearmon, format = "%Y.%m"))
?as.Date
df_1999 <- df_1999 %>%
mutate(date = as.Date(x = yearmon, format = "%Y.%m"))
df_1999 <- df_1999 %>%
mutate(date = as.Date(x = yearmon, origin = "%Y.%m"))
df_1999 <- subset(df, yearmon <= 1999.12)
df_1999 <- df_1999 %>%
mutate(date = as.Date(x = yearmon, origin = "%Y.%m"))
df_1999 <- df_1999 %>%
mutate(date = as.Date(paste(df$year, df$month, 01), "%Y %m %d"))
df_1999 <- subset(df, yearmon <= 1999.12)
df_1999 <- df_1999 %>%
group_by(year, month) %>%
summarise(mean_prop_short = mean(propshortfalltroops, na.rm = TRUE),
yearmon2 = yearmon) %>%
ungroup()
df_1999 <- df_1999 %>%
mutate(date = as.Date(paste(df$year, df$month, 01), "%Y %m %d"))
df <- read_dta("Dropbox/Projects/Active_Projects/Mandate_Contribute/Make_Data/Shortfalls/Personnel_shortfall_data.dta")
df <- read_dta("Dropbox/Projects/Active_Projects/Mandate_Contribute/Make_Data/Shortfalls/Personnel_shortfall_data.dta")
df <- df %>%
mutate(date = make_date(year = df$year, month = df$month))
View(df)
df_1999 <- subset(df, year <= 1999)
df_2000 <- subset(df, year >= 2000)
df_1999 <- df_1999 %>%
group_by(year, month) %>%
summarise(mean_prop_short = mean(propshortfalltroops, na.rm = TRUE),
yearmon2 = yearmon) %>%
ungroup()
View(df_1999)
df_1999 <- subset(df, year <= 1999)
df_2000 <- subset(df, year >= 2000)
df_1999 <- df_1999 %>%
group_by(year, month) %>%
summarise(mean_prop_short = mean(propshortfalltroops, na.rm = TRUE),
yearmon2 = yearmon,
date = date) %>%
ungroup()
View(df_1999)
library(tidyverse)
library(haven)
library(lubridate)
df <- read_dta("Dropbox/Projects/Active_Projects/Mandate_Contribute/Make_Data/Shortfalls/Personnel_shortfall_data.dta")
df <- df %>%
mutate(date = make_date(year = df$year, month = df$month))
df_1999 <- subset(df, year <= 1999)
df_2000 <- subset(df, year >= 2000)
df_1999 <- df_1999 %>%
group_by(year, month) %>%
summarise(mean_prop_short = mean(propshortfalltroops, na.rm = TRUE),
yearmon2 = yearmon,
date = date) %>%
ungroup()
df_2000 <- df_2000 %>%
group_by(year, month) %>%
summarise(mean_prop_short = mean(propshortfalltroops, na.rm = TRUE),
yearmon2 = yearmon,
date = date) %>%
ungroup()
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year-Month") +
ylim(c(0, 0.5)) +
ylab("Average Shortfall Proportion") +
ggtitle("Average Shortfall Proportion Over Time") +
geom_vline(xintercept = c(2000), linetype = "dashed") +
geom_text(aes(x = 2004, y = 0.33, label = "Brahimi Report"), size = 10) +
theme(plot.title = element_text(hjust = 0.5, size = 40),
legend.title = element_text(size = 20),
legend.text = element_text(size = 20),
legend.key.size = unit(1.5, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.y = element_text(size = 35, margin = margin(0, 15, 0, 0)),
axis.title.x = element_text(size = 35, margin = margin(15, 0, 10, 0)),
axis.ticks.length = unit(10, "pt"),
text = element_text(family = "Times New Roman"))
library(tidyverse)
library(haven)
library(lubridate)
df <- read_dta("Dropbox/Projects/Active_Projects/Mandate_Contribute/Make_Data/Shortfalls/Personnel_shortfall_data.dta")
df <- df %>%
mutate(date = make_date(year = df$year, month = df$month))
df_1999 <- subset(df, year <= 1999)
df_2000 <- subset(df, year >= 2000)
df_1999 <- df_1999 %>%
group_by(year, month) %>%
summarise(mean_prop_short = mean(propshortfalltroops, na.rm = TRUE),
yearmon2 = yearmon,
date = date) %>%
ungroup()
df_2000 <- df_2000 %>%
group_by(year, month) %>%
summarise(mean_prop_short = mean(propshortfalltroops, na.rm = TRUE),
yearmon2 = yearmon,
date = date) %>%
ungroup()
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short))
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black")
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year")
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year")
ylim(c(0, 0.5)) +
ylab("Average Shortfall Proportion") +
ggtitle("Average Shortfall Proportion Over Time") +
# geom_vline(xintercept = c(2000), linetype = "dashed") +
geom_text(aes(x = 2004, y = 0.33, label = "Brahimi Report"), size = 10) +
theme(plot.title = element_text(hjust = 0.5, size = 40),
legend.title = element_text(size = 20),
legend.text = element_text(size = 20),
legend.key.size = unit(1.5, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.y = element_text(size = 35, margin = margin(0, 15, 0, 0)),
axis.title.x = element_text(size = 35, margin = margin(15, 0, 10, 0)),
axis.ticks.length = unit(10, "pt"),
text = element_text(family = "Times New Roman"))
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year") +
ylim(c(0, 0.5)) +
ylab("Average Shortfall Proportion") +
ggtitle("Average Shortfall Proportion Over Time") +
# geom_vline(xintercept = c(2000), linetype = "dashed") +
geom_text(aes(x = 2004, y = 0.33, label = "Brahimi Report"), size = 10) +
theme(plot.title = element_text(hjust = 0.5, size = 40),
legend.title = element_text(size = 20),
legend.text = element_text(size = 20),
legend.key.size = unit(1.5, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.y = element_text(size = 35, margin = margin(0, 15, 0, 0)),
axis.title.x = element_text(size = 35, margin = margin(15, 0, 10, 0)),
axis.ticks.length = unit(10, "pt"),
text = element_text(family = "Times New Roman"))
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year") +
ylim(c(0, 0.5)) +
ylab("Average Shortfall Proportion") +
ggtitle("Average Shortfall Proportion Over Time") +
# geom_vline(xintercept = c(2000), linetype = "dashed") +
# geom_text(aes(x = 2004, y = 0.33, label = "Brahimi Report"), size = 10) +
theme(plot.title = element_text(hjust = 0.5, size = 40),
legend.title = element_text(size = 20),
legend.text = element_text(size = 20),
legend.key.size = unit(1.5, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.y = element_text(size = 35, margin = margin(0, 15, 0, 0)),
axis.title.x = element_text(size = 35, margin = margin(15, 0, 10, 0)),
axis.ticks.length = unit(10, "pt"),
text = element_text(family = "Times New Roman"))
ggsave("gg_shortfall_learning.jpg", path = "~/Dropbox/Projects/Active_Projects/Mandate_Contribute/Paper",  width = 14, height = 12, dpi = 400)
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year") +
ylim(c(0, 0.5)) +
ylab("Average Shortfall Proportion") +
ggtitle("Average Shortfall Proportion Over Time") +
geom_vline(xintercept = c("2000-01-01"), linetype = "dashed") +
# geom_text(aes(x = 2004, y = 0.33, label = "Brahimi Report"), size = 10) +
theme(plot.title = element_text(hjust = 0.5, size = 40),
legend.title = element_text(size = 20),
legend.text = element_text(size = 20),
legend.key.size = unit(1.5, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.y = element_text(size = 35, margin = margin(0, 15, 0, 0)),
axis.title.x = element_text(size = 35, margin = margin(15, 0, 10, 0)),
axis.ticks.length = unit(10, "pt"),
text = element_text(family = "Times New Roman"))
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year") +
ylim(c(0, 0.5)) +
ylab("Average Shortfall Proportion") +
ggtitle("Average Shortfall Proportion Over Time") +
geom_vline(xintercept = c(2000-01-01), linetype = "dashed") +
# geom_text(aes(x = 2004, y = 0.33, label = "Brahimi Report"), size = 10) +
theme(plot.title = element_text(hjust = 0.5, size = 40),
legend.title = element_text(size = 20),
legend.text = element_text(size = 20),
legend.key.size = unit(1.5, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.y = element_text(size = 35, margin = margin(0, 15, 0, 0)),
axis.title.x = element_text(size = 35, margin = margin(15, 0, 10, 0)),
axis.ticks.length = unit(10, "pt"),
text = element_text(family = "Times New Roman"))
ggsave("gg_shortfall_learning.jpg", path = "~/Dropbox/Projects/Active_Projects/Mandate_Contribute/Paper",  width = 14, height = 12, dpi = 400)
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year") +
ylim(c(0, 0.5)) +
ylab("Average Shortfall Proportion") +
ggtitle("Average Shortfall Proportion Over Time") +
geom_vline(xintercept = c(2000), linetype = "dashed") +
# geom_text(aes(x = 2004, y = 0.33, label = "Brahimi Report"), size = 10) +
theme(plot.title = element_text(hjust = 0.5, size = 40),
legend.title = element_text(size = 20),
legend.text = element_text(size = 20),
legend.key.size = unit(1.5, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.y = element_text(size = 35, margin = margin(0, 15, 0, 0)),
axis.title.x = element_text(size = 35, margin = margin(15, 0, 10, 0)),
axis.ticks.length = unit(10, "pt"),
text = element_text(family = "Times New Roman"))
ggsave("gg_shortfall_learning.jpg", path = "~/Dropbox/Projects/Active_Projects/Mandate_Contribute/Paper",  width = 14, height = 12, dpi = 400)
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year") +
ylim(c(0, 0.5)) +
ylab("Average Shortfall Proportion") +
ggtitle("Average Shortfall Proportion Over Time") +
geom_vline(xintercept = c(2000), linetype = "dashed") +
geom_text(aes(x = 2004, y = 0.33, label = "Brahimi Report"), size = 10) +
theme(plot.title = element_text(hjust = 0.5, size = 40),
legend.title = element_text(size = 20),
legend.text = element_text(size = 20),
legend.key.size = unit(1.5, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.y = element_text(size = 35, margin = margin(0, 15, 0, 0)),
axis.title.x = element_text(size = 35, margin = margin(15, 0, 10, 0)),
axis.ticks.length = unit(10, "pt"),
text = element_text(family = "Times New Roman"))
dateline = as.Date("2000-01-01")
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year") +
ylim(c(0, 0.5)) +
ylab("Average Shortfall Proportion") +
ggtitle("Average Shortfall Proportion Over Time") +
geom_vline(xintercept = dateline, linetype = "dashed") +
#geom_text(aes(x = 2004, y = 0.33, label = "Brahimi Report"), size = 10) +
theme(plot.title = element_text(hjust = 0.5, size = 40),
legend.title = element_text(size = 20),
legend.text = element_text(size = 20),
legend.key.size = unit(1.5, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.y = element_text(size = 35, margin = margin(0, 15, 0, 0)),
axis.title.x = element_text(size = 35, margin = margin(15, 0, 10, 0)),
axis.ticks.length = unit(10, "pt"),
text = element_text(family = "Times New Roman"))
ggsave("gg_shortfall_learning.jpg", path = "~/Dropbox/Projects/Active_Projects/Mandate_Contribute/Paper",  width = 14, height = 12, dpi = 400)
date_text = as.Date("2004-01-01")
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year") +
ylim(c(0, 0.5)) +
ylab("Average Shortfall Proportion") +
ggtitle("Average Shortfall Proportion Over Time") +
geom_vline(xintercept = dateline, linetype = "dashed") +
geom_text(aes(x = date_text, y = 0.33, label = "Brahimi Report"), size = 10) +
theme(plot.title = element_text(hjust = 0.5, size = 40),
legend.title = element_text(size = 20),
legend.text = element_text(size = 20),
legend.key.size = unit(1.5, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.y = element_text(size = 35, margin = margin(0, 15, 0, 0)),
axis.title.x = element_text(size = 35, margin = margin(15, 0, 10, 0)),
axis.ticks.length = unit(10, "pt"),
text = element_text(family = "Times New Roman"))
ggsave("gg_shortfall_learning.jpg", path = "~/Dropbox/Projects/Active_Projects/Mandate_Contribute/Paper",  width = 14, height = 12, dpi = 400)
date_text = as.Date("2003-01-01")
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year") +
ylim(c(0, 0.5)) +
ylab("Average Shortfall Proportion") +
ggtitle("Average Shortfall Proportion Over Time") +
geom_vline(xintercept = dateline, linetype = "dashed") +
geom_text(aes(x = date_text, y = 0.33, label = "Brahimi Report"), size = 10) +
theme(plot.title = element_text(hjust = 0.5, size = 40),
legend.title = element_text(size = 20),
legend.text = element_text(size = 20),
legend.key.size = unit(1.5, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.y = element_text(size = 35, margin = margin(0, 15, 0, 0)),
axis.title.x = element_text(size = 35, margin = margin(15, 0, 10, 0)),
axis.ticks.length = unit(10, "pt"),
text = element_text(family = "Times New Roman"))
ggsave("gg_shortfall_learning.jpg", path = "~/Dropbox/Projects/Active_Projects/Mandate_Contribute/Paper",  width = 14, height = 12, dpi = 400)
View(df_1999)
df <- df %>%
mutate(date = make_date(year = df$year, month = df$month))
df_1999 <- subset(df, year <= 1999)
df_2000 <- subset(df, year >= 2000)
df_1999 <- df_1999 %>%
group_by(date) %>%
summarise(mean_prop_short = mean(propshortfalltroops, na.rm = TRUE),
yearmon2 = yearmon,
date = date) %>%
ungroup()
df <- df %>%
mutate(date = make_date(year = df$year, month = df$month))
df_1999 <- subset(df, year <= 1999)
df_2000 <- subset(df, year >= 2000)
df_1999 <- df_1999 %>%
group_by(date) %>%
summarise(mean_prop_short = mean(propshortfalltroops, na.rm = TRUE)) %>%
ungroup()
library(tidyverse)
library(haven)
library(lubridate)
df <- read_dta("Dropbox/Projects/Active_Projects/Mandate_Contribute/Make_Data/Shortfalls/Personnel_shortfall_data.dta")
df <- df %>%
mutate(date = make_date(year = df$year, month = df$month))
df_1999 <- subset(df, year <= 1999)
df_2000 <- subset(df, year >= 2000)
df_1999 <- df_1999 %>%
group_by(date) %>%
summarise(mean_prop_short = mean(propshortfalltroops, na.rm = TRUE)) %>%
ungroup()
df_2000 <- df_2000 %>%
group_by(date) %>%
summarise(mean_prop_short = mean(propshortfalltroops, na.rm = TRUE)) %>%
ungroup()
dateline = as.Date("2000-01-01")
date_text = as.Date("2003-01-01")
ggplot(data = df_1999) + geom_smooth(aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
geom_smooth(data = df_2000, aes(x = date, y = mean_prop_short), method = "loess", na.rm = TRUE, color = "black") +
xlab("Year") +
ylim(c(0, 0.45)) +
ylab("Average Shortfall Proportion") +
ggtitle("Average Shortfall Proportion Over Time") +
geom_vline(xintercept = dateline, linetype = "dashed") +
geom_text(aes(x = date_text, y = 0.33, label = "Brahimi Report"), size = 10) +
theme(plot.title = element_text(hjust = 0.5, size = 40),
legend.title = element_text(size = 20),
legend.text = element_text(size = 20),
legend.key.size = unit(1.5, "cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.y = element_text(size = 35, margin = margin(0, 15, 0, 0)),
axis.title.x = element_text(size = 35, margin = margin(15, 0, 10, 0)),
axis.ticks.length = unit(10, "pt"),
text = element_text(family = "Times New Roman"))
ggsave("gg_shortfall_learning.jpg", path = "~/Dropbox/Projects/Active_Projects/Mandate_Contribute/Paper",  width = 14, height = 12, dpi = 400)
#~~~~~~~~~~~~~~~~#
#### Packages ####
#~~~~~~~~~~~~~~~~#
library(tidyverse)
library(countrycode)
library(peacesciencer)
library(readxl)
library(data.table)
library(lubridate)
library(haven)
library(countrycode)
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#
#### Import Appointments Dataset ####
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#
FC <- read_excel("UN_Leaders/UN_Leader.xlsx", sheet = "months")
#~~~~~~~~~~~~~~~~#
#### Packages ####
#~~~~~~~~~~~~~~~~#
library(tidyverse)
library(countrycode)
library(peacesciencer)
library(readxl)
library(data.table)
library(lubridate)
library(haven)
library(countrycode)
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#
#### Import Appointments Dataset ####
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#
FC <- read_excel("UN_Leaders/UN_Leader.xlsx", sheet = "months")
#~~~~~~~~~~~~~~~~#
#### Packages ####
#~~~~~~~~~~~~~~~~#
library(tidyverse)
library(countrycode)
library(peacesciencer)
library(readxl)
library(data.table)
library(lubridate)
library(haven)
library(countrycode)
# Notes #
# FC overlaps. Make the last FC end on the 31st or 30th of the previous month to avoid double counting.
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#
#### Import Appointments Dataset ####
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#
FC <- read_excel("UN_Leaders/UN_Leader.xlsx", sheet = "months")
library(readr)
dyadic_formatv3 <- read_csv("Dropbox/Projects/Active_Projects/Mandate_Contribute/Make_Data/Joint_IOs/dyadic_formatv3.csv")
dyadic_formatv3 <- subset(dyadic_formatv3, year > 1985)
write.csv(dyadic_formatv3, "Desktop/dyadic_formatv3.csv", row.names = TRUE)
### Model 2: All ###
# Betas #
betas <- as.matrix(read.table("betas/betas_m2_all.txt", header = T))
require(tidyverse)
require(haven)
require(ggplot2)
require(ggpubr)
library(lattice)
library(MASS)
library(VGAM)
library(ggridges)
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#
#### Set Working Directory ####
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#
setwd("~/Dropbox/Projects/Active_Projects/Mandate_Contribute/Data_Analysis/R")
### Model 2: All ###
# Betas #
betas <- as.matrix(read.table("betas/betas_m2_all.txt", header = T))
# var-cov #
vcov <- as.matrix(read.table("vcovs/vcovs_m2_all.txt", header = T))
# Simulate coefficients #
nsims <- 20000
set.seed(1234)
simb <- mvrnorm(n = nsims, mu = betas, Sigma = vcov)
# Pull lag_risk_ratio #
x1 <- data.frame(simb[, 1])
# Add identifier #
x1 <- x1 %>%
mutate(model = "All") %>%
rename(V1 = simb...1.)
# Clear space #
remove(betas, simb, vcov, nsims)
### Model 2: Pre ###
# Betas #
betas <- as.matrix(read.table("betas/betas_m2_pre.txt", header = T))
# var-cov #
vcov <- as.matrix(read.table("vcovs/vcovs_m2_pre.txt", header = T))
# Simulate coefficients #
nsims <- 20000
set.seed(1234)
simb <- mvrnorm(n = nsims, mu = betas, Sigma = vcov)
# Pull lag_risk_ratio #
x2 <- data.frame(simb[, 1])
# Add identifier #
x2 <- x2 %>%
mutate(model = "Pre-2000") %>%
rename(V1 = simb...1.)
# Clear space #
remove(betas, simb, vcov, nsims)
### Model 2: Post ###
# Betas #
betas <- as.matrix(read.table("betas/betas_m2_post.txt", header = T))
# var-cov #
vcov <- as.matrix(read.table("vcovs/vcovs_m2_post.txt", header = T))
# Simulate coefficients #
nsims <- 20000
set.seed(1234)
simb <- mvrnorm(n = nsims, mu = betas, Sigma = vcov)
# Pull lag_risk_ratio #
x3 <- data.frame(simb[, 1])
# Add identifier #
x3 <- x3 %>%
mutate(model = "Post-2000") %>%
rename(V1 = simb...1.)
# Clear space #
remove(betas, simb, vcov, nsims)
# Combine simulations #
x <- rbind(x1, x2, x3)
remove(x1, x2, x3)
# Order Levels of model #
x <- x %>%
mutate(model = factor(model,
levels = c("Post-2000", "Pre-2000", "All")))
# Make Figure #
g1 <- ggplot(x, aes(x = V1, y = model)) +
geom_density_ridges(quantile_lines = TRUE, quantiles = c(0.025, 0.50, 0.975),
rel_min_height = 0.00001, size = 1.2, scale = 0.75) +
geom_vline(xintercept = 0, linewidth = 1.5) +
xlab(expression("Risk Ratio"[italic("t-1")])) +
ggtitle("Effect of Risk Ratio Pre-Post Brahimi, Model 2") +
theme(plot.title = element_text(hjust = 0.5, size = 45),
plot.subtitle = element_text(hjust = 0.5, size = 30),
axis.title = element_text(size = 40),
axis.title.y = element_blank(),
axis.title.x = element_text(size = 40, margin = margin(20, 0, 0, 0)),
legend.title = element_text(size = 40),
legend.text = element_text(size = 40),
legend.key.size = unit(2, "cm"),
axis.text.x = element_text(size = 40),
axis.text.y = element_text(size = 40),
text = element_text(family = "Times New Roman"),
plot.margin = margin(1, 1, 1, 1, "cm"),
axis.ticks.length = unit(.25, "cm"))
ggsave("gg_m2_pre_post.jpg", path = "~/Dropbox/Projects/Active_Projects/Dissertation/Paper", width = 16, height = 12, dpi = 800)
